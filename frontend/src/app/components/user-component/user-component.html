<div class="users-list-container py-5">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between mb-4">
      <h2 class="h4 mb-0 fw-bold d-flex align-items-center">
        <i class="bi bi-people-fill me-2 text-primary"></i>
        All Users
      </h2>
    </div>
    <div class="mb-4">
      <div class="input-group input-group-lg search-box">
        <span class="input-group-text bg-white border-end-0">
          <i class="bi bi-search text-muted"></i>
        </span>
        <input
          type="text"
          class="form-control border-start-0 ps-0"
          placeholder="Search by name, lastName, or username..."
          [(ngModel)]="searchQuery"
          (keyup.enter)="filterUsers()"
        />
      </div>
    </div>
    @if (isLoading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Loading users...</p>
    </div>
    } @if (users && users.length === 0) {
    <div class="text-center py-5">
      <i class="bi bi-people display-1 text-muted opacity-50"></i>
      <h3 class="mt-4 text-muted">No users found</h3>
      <p class="text-muted">Try adjusting your search or filters.</p>
    </div>
    } @else {
    <div class="row g-4">
      @for (user of users; track user.uuid) {
      <div class="col">
        <div class="user-card-wrapper d-flex">
          <app-user-view
            [user]="user"
            (ban)="setUuid($event)"
            (delete)="dUser($event)"
          ></app-user-view>
        </div>
      </div>
      }
    </div>
    }
    <nav class="d-flex justify-content-center mt-5">
      <ul class="pagination pagination-lg">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button
            class="page-link"
            [disabled]="currentPage === 1"
            (click)="setPage(currentPage - 1)"
          >
            Previous
          </button>
        </li>
        <li class="page-item" [class.disabled]="currentPage >= totalPages">
          <button
            class="page-link"
            [disabled]="currentPage === totalPages"
            (click)="setPage(currentPage + 1)"
          >
            Next
          </button>
        </li>
      </ul>
    </nav>
  </div>
</div>
@if (deleteUser) {
<app-delete-user-popup (confirm)="confirmDelete($event)"></app-delete-user-popup>
} @else if (uuid) {
<app-ban-popup (confirm)="confirm($event)"></app-ban-popup>
}
