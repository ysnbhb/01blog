<div class="app-layout">
  @if (user) {
    <div class="d-flex h-100">
      <app-nav-bar [user]="user"></app-nav-bar>

      <div class="content-wrapper flex-grow-1 overflow-auto">
        <div class="container my-4">
          <div class="user-reports-container py-5">
            <div class="container">

              @if (isLoading) {
                <div class="text-center py-5">
                  <div class="spinner-border text-warning" style="width: 3rem; height: 3rem;" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              }

              <!-- Empty State -->
              @else if (reports.length === 0) {
                <div class="text-center py-5 text-success">
                  <i class="bi bi-shield-check display-1 opacity-75"></i>
                  <h3 class="mt-4">No reports</h3>
                  <p class="text-muted">This user has a clean record</p>
                </div>
              }

              <!-- Reports List -->
              @else {
                <div class="row g-4">
                  @for (r of reports; track r.id) {
                    <div class="col-md-12 col-lg-6">
                      <div class="report-card p-4 rounded-4 shadow-sm bg-white border-0 position-relative overflow-hidden">

                        <!-- Reporter Info + Timestamp -->
                        <div class="d-flex align-items-center justify-content-between mb-3">
                          <div class="d-flex align-items-center gap-3">
                            <img
                              [src]="'http://localhost:8080/image/' + r.url_photo"
                              [alt]="r.username"
                              class="reporter-avatar"
                            />
                            <div>
                              <div class="fw-bold text-dark">@{{ r.username }}</div>
                              <div class="text-muted small">Reporter</div>
                            </div>
                          </div>

                          <!-- Timestamp -->
                          <div class="text-end">
                            <small class="text-muted d-block">
                              <i class="bi bi-clock-history me-1"></i>
                              {{ (r.createdat) |formatDate }}
                            </small>
                          </div>
                        </div>

                        <!-- Report Reason -->
                        <div class="report-reason p-3 rounded-3 bg-light border-start border-warning border-4">
                          <p class="mb-0 text-dark small lh-lg">{{ r.reason }}</p>
                        </div>

                        <!-- Optional: Report ID -->
                        <div class="mt-3 text-end">
                          <small class="text-muted">
                            Report ID: <code>#{{ r.id }}</code>
                          </small>
                        </div>
                      </div>
                    </div>
                  }
                </div>
              }

            </div>
          </div>
        </div>
      </div>
    </div>
  }
</div>